<div class="register-container">
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <h2>{{ 'register.title' | translate }}</h2>

    <div class="form-row">
      <div class="form-group">
        <label>{{ 'register.firstName' | translate }}</label>
        <input type="text" formControlName="firstName" class="form-control" />
        <small *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
          {{ 'register.firstNameError' | translate }}
        </small>
      </div>

      <div class="form-group">
        <label>{{ 'register.lastName' | translate }}</label>
        <input type="text" formControlName="lastName" class="form-control" />
        <small *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
          {{ 'register.lastNameError' | translate }}
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>{{ 'register.dateOfBirth' | translate }}</label>
        <p-calendar 
          formControlName="dateOfBirth"
          [iconDisplay]="'input'" 
          [showIcon]="true" 
          [maxDate]="maxDate"
          dateFormat="yy-mm-dd"
          inputId="icondisplay"
          styleClass="custom-calendar" />
        <small *ngIf="registerForm.get('dateOfBirth')?.invalid && registerForm.get('dateOfBirth')?.touched">
          {{ 'register.dateOfBirthError' | translate }}
        </small>
      </div>

      <div class="form-group">
        <label>{{ 'register.gender' | translate }}</label>
        <p-dropdown 
          [options]="genders" 
          formControlName="gender"
          optionLabel="label" 
          [placeholder]="'register.genderPlaceholder' | translate" />
        <small *ngIf="registerForm.get('gender')?.invalid && registerForm.get('gender')?.touched">
          {{ 'register.genderError' | translate }}
        </small>
      </div>
    </div>

    <div class="form-group full-width">
      <label>{{ 'register.address' | translate }}</label>
      <input type="text" formControlName="address" class="form-control" />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>{{ 'register.email' | translate }}</label>
        <input type="email" formControlName="email" class="form-control" />
        <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          {{ 'register.emailError' | translate }}
        </small>
      </div>

      <div class="form-group">
        <label>{{ 'register.phone' | translate }}</label>
        <input type="text" formControlName="phone" class="form-control" />
        <small *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
          {{ 'register.phoneError' | translate }}
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>{{ 'register.password' | translate }}</label>
        <input type="password" formControlName="password" class="form-control" />
        <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
          {{ 'register.passwordError' | translate }}
        </small>
      </div>

      <div class="form-group">
        <label>{{ 'register.confirmPassword' | translate }}</label>
        <input type="password" formControlName="confirmPassword" class="form-control" />
        <small *ngIf="registerForm.get('confirmPassword')?.touched && !passwordsMatch()">
          {{ 'register.confirmPasswordError' | translate }}
        </small>
      </div>
    </div>

    <div class="form-row">
      <label class="form-label">{{ 'register.captcha' | translate }}</label>
      <re-captcha (resolved)="onCaptchaResolved($event)" [siteKey]="siteKey"></re-captcha>
    </div>

    <button type="submit" [disabled]="registerForm.invalid || !recaptchaToken" class="btn-submit">
      {{ 'register.submit' | translate }}
    </button>

    <p class="text-center mt-3">
      {{ 'register.alreadyHaveAccount' | translate }}
      <a [routerLink]="['/login']" style="cursor: pointer;">{{ 'register.loginNow' | translate }}</a>
    </p>
  </form>
</div>
