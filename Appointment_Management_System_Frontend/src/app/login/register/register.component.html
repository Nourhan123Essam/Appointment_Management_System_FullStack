<div class="register-container">
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <h2>Register</h2>

    <div class="form-row">
      <div class="form-group">
        <label>First Name</label>
        <input type="text" formControlName="firstName" class="form-control" />
        <small *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
          First name is required (min 3 characters).
        </small>
      </div>

      <div class="form-group">
        <label>Last Name</label>
        <input type="text" formControlName="lastName" class="form-control" />
        <small *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
          Last name is required (min 3 characters).
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Date of Birth</label>
        <p-calendar 
        formControlName="dateOfBirth"
        [iconDisplay]="'input'" 
        [showIcon]="true" 
        [maxDate]="maxDate"
        dateFormat="yy-mm-dd"
        inputId="icondisplay"
        styleClass="custom-calendar" />
      
        <small *ngIf="registerForm.get('dateOfBirth')?.invalid && registerForm.get('dateOfBirth')?.touched">
          Date of birth is required.
        </small>
      </div>

      <div class="form-group">
        <label>Gender</label>
          <p-dropdown 
          [options]="genders" 
          formControlName="gender"
          optionLabel="label" 
          placeholder="Select a Gendeer" />
        <small *ngIf="registerForm.get('gender')?.invalid && registerForm.get('gender')?.touched">
          Gender is required.
        </small>
      </div>
    </div>

    <div class="form-group full-width">
      <label>Address</label>
      <input type="text" formControlName="address" class="form-control" />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Email</label>
        <input type="email" formControlName="email" class="form-control" />
        <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          Enter a valid email.
        </small>
      </div>

      <div class="form-group">
        <label>Phone Number</label>
        <input type="text" formControlName="phone" class="form-control" />
        <small *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
          Enter a valid phone number (e.g., 01012345678).
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Password</label>
        <input type="password" formControlName="password" class="form-control" />
        <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
          Password must meet requirements.
        </small>
      </div>

      <div class="form-group">
        <label>Confirm Password</label>
        <input type="password" formControlName="confirmPassword" class="form-control" />
        <small *ngIf="registerForm.get('confirmPassword')?.touched && !passwordsMatch()">
          Passwords do not match.
        </small>
      </div>
    </div>

    <div class="form-row">
      <label class="form-label">CAPTCHA Verification</label>
      <re-captcha (resolved)="onCaptchaResolved($event)" [siteKey]="siteKey"></re-captcha>
    </div>

    <button type="submit" [disabled]="registerForm.invalid || !recaptchaToken" class="btn-submit">Register</button>
  
    <p class="text-center mt-3">
      Already Have an Account? 
      <a [routerLink]="['/login']" style="cursor: pointer;">Login Now</a>
    </p>

  </form>

 
</div>
